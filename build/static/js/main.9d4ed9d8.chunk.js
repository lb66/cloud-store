(this["webpackJsonpcloud-store"]=this["webpackJsonpcloud-store"]||[]).push([[3],{115:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(11),a=n.n(i),c=(n(115),n(27)),u=n.p+"static/media/logo.103b5fa1.svg",l=n(28),s=n(45),p=n(7),f=n(148),b=n(76),m=n(82);function y(){var e=Object(c.a)(["\n  margin-left:10px;\n"]);return y=function(){return e},e}function O(){var e=Object(c.a)(["\n  margin-left:auto;\n  color:orange;\n"]);return O=function(){return e},e}function h(){var e=Object(c.a)(["\ncolor:#fff;\nmargin-left:3vw;\n&.active{\n  border-bottom:1px solid #fff;\n}\n"]);return h=function(){return e},e}function g(){var e=Object(c.a)(["\nheight:25px;\n"]);return g=function(){return e},e}function j(){var e=Object(c.a)(["\nbackground-color:#303841;\ndisplay:flex;\nalign-items:center;\npadding:10px 5vw;\n"]);return j=function(){return e},e}var d=l.a.header(j()),v=l.a.img(g()),w=Object(l.a)(s.b)(h()),P=l.a.div(O()),U=Object(l.a)(f.a)(y()),E=Object(m.a)((function(){var e=Object(b.a)(),t=e.userStore,n=e.authStore,i=Object(p.f)();return Object(r.useEffect)((function(){t.pullUser()}),[]),o.a.createElement(d,null,o.a.createElement(v,{src:u}),o.a.createElement("nav",null,o.a.createElement(w,{to:"/",activeClassName:"active",exact:!0},"\u9996\u9875"),o.a.createElement(w,{to:"/history",activeClassName:"active"},"\u5386\u53f2")),o.a.createElement(P,null,t.currentUser?o.a.createElement(o.a.Fragment,null,t.currentUser.attributes.username," ",o.a.createElement(U,{ghost:!0,onClick:function(){n.logout()}},"\u6ce8\u9500")):o.a.createElement(o.a.Fragment,null,o.a.createElement(U,{type:"primary",onClick:function(){i.push("./login")}},"\u767b\u5f55"),o.a.createElement(U,{type:"primary",onClick:function(){i.push("./register")}},"\u6ce8\u518c"))))}));function k(){var e=Object(c.a)(["\nfont-size:12px;\ntext-align:center;\ncolor:#aaa;\npadding:10px\n"]);return k=function(){return e},e}var F=l.a.footer(k());var D=function(){return o.a.createElement(F,null,"miku")},z=n(149),x=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9)]).then(n.bind(null,363))})),S=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(6),n.e(8)]).then(n.bind(null,364))})),C=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,352))})),L=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,353))}));var I=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(E,null),o.a.createElement("main",null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(z.a,{size:"large",tip:"\u52a0\u8f7d\u4e2d"})},o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/",exact:!0,component:x}),o.a.createElement(p.a,{path:"/history",component:S}),o.a.createElement(p.a,{path:"/login",component:C}),o.a.createElement(p.a,{path:"/register",component:L})))),o.a.createElement(D,null))},M=function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,354)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),i(e),a(e)}))};a.a.render(o.a.createElement(s.a,null,o.a.createElement(I,null)),document.getElementById("root")),M()},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(0),o=n(12),i=n(29),a=n(30),c=n(5),u=(n(53),n(1)),l=n(16),s=n.n(l);s.a.init({appId:"hbACa0laapfvLgYDNsPOF0X4-9Nh9j0Va",appKey:"R1AXOKFIi09Gric7RPae3pWn",serverURL:"https://hbaca0la.lc-cn-e1-shared.com"});var p=function(e,t){var n=new l.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},f=function(e,t){return new Promise((function(n,r){l.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},b=function(){return l.User.current()},m=function(){l.User.logOut()},y={add:function(e,t){var n=new s.a.Object("Files"),r=new s.a.File(t,e);return n.set("filename",t),n.set("owner",s.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},find:function(e){var t=e.page,n=e.limit,r=new l.Query("Files");return r.include("owner"),r.limit(n),r.skip(t*n),r.equalTo("owner",l.User.current()),r.descending("createdAt"),new Promise((function(e,t){r.find().then((function(t){return e(t)}),(function(e){return t(e)}))}))},delete:function(e){s.a.Object.createWithoutData("Files",e).destroy()}};window.Uploader=y;var O,h,g,j,d,v,w,P,U,E,k,F,D,z,x=n(150),S=new(O=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"currentUser",h,this)}return Object(a.a)(e,[{key:"pullUser",value:function(){this.currentUser=b()}},{key:"reset",value:function(){this.currentUser=null}}]),e}(),h=Object(c.a)(O.prototype,"currentUser",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(O.prototype,"pullUser",[u.f],Object.getOwnPropertyDescriptor(O.prototype,"pullUser"),O.prototype),Object(c.a)(O.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(O.prototype,"reset"),O.prototype),O),C=new(g=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"file",j,this),Object(o.a)(this,"filename",d,this),Object(o.a)(this,"isUploading",v,this),Object(o.a)(this,"serverFile",w,this)}return Object(a.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(t,n){y.add(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.serverFile=null,this.isUploading=!1}}]),e}(),j=Object(c.a)(g.prototype,"file",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=Object(c.a)(g.prototype,"filename",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Object(c.a)(g.prototype,"isUploading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(c.a)(g.prototype,"serverFile",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(g.prototype,"setFilename",[u.f],Object.getOwnPropertyDescriptor(g.prototype,"setFilename"),g.prototype),Object(c.a)(g.prototype,"setFile",[u.f],Object.getOwnPropertyDescriptor(g.prototype,"setFile"),g.prototype),Object(c.a)(g.prototype,"upload",[u.f],Object.getOwnPropertyDescriptor(g.prototype,"upload"),g.prototype),Object(c.a)(g.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(g.prototype,"reset"),g.prototype),g),L=new(P=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"list",U,this),Object(o.a)(this,"isLoading",E,this),Object(o.a)(this,"hasMore",k,this),Object(o.a)(this,"page",F,this)}return Object(a.a)(e,[{key:"find",value:function(){var e=this;this.isLoading=!0,y.find({page:this.page,limit:15}).then((function(t){e.list=e.list.concat(t),e.page++,t.length<15&&(e.hasMore=!1)})).catch((function(e){x.b.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"delete",value:function(e){y.delete(e)}},{key:"unmount",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}},{key:"reset",value:function(){this.list=[],this.page=0}}]),e}(),U=Object(c.a)(P.prototype,"list",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=Object(c.a)(P.prototype,"isLoading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=Object(c.a)(P.prototype,"hasMore",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),F=Object(c.a)(P.prototype,"page",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(c.a)(P.prototype,"find",[u.f],Object.getOwnPropertyDescriptor(P.prototype,"find"),P.prototype),Object(c.a)(P.prototype,"delete",[u.f],Object.getOwnPropertyDescriptor(P.prototype,"delete"),P.prototype),Object(c.a)(P.prototype,"unmount",[u.f],Object.getOwnPropertyDescriptor(P.prototype,"unmount"),P.prototype),Object(c.a)(P.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(P.prototype,"reset"),P.prototype),P),I=new(D=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"values",z,this)}return Object(a.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){f(e.values.username,e.values.password).then((function(e){S.pullUser(),t(e)})).catch((function(e){x.b.error("\u767b\u5f55\u5931\u8d25"),S.reset(),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){p(e.values.username,e.values.password).then((function(e){S.pullUser(),t(e)})).catch((function(e){x.b.error("\u6ce8\u518c\u5931\u8d25"),S.reset(),n(e)}))}))}},{key:"logout",value:function(){m(),S.reset(),C.reset(),L.reset()}}]),e}(),z=Object(c.a)(D.prototype,"values",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(c.a)(D.prototype,"setUsername",[u.f],Object.getOwnPropertyDescriptor(D.prototype,"setUsername"),D.prototype),Object(c.a)(D.prototype,"setPassword",[u.f],Object.getOwnPropertyDescriptor(D.prototype,"setPassword"),D.prototype),Object(c.a)(D.prototype,"login",[u.f],Object.getOwnPropertyDescriptor(D.prototype,"login"),D.prototype),Object(c.a)(D.prototype,"register",[u.f],Object.getOwnPropertyDescriptor(D.prototype,"register"),D.prototype),Object(c.a)(D.prototype,"logout",[u.f],Object.getOwnPropertyDescriptor(D.prototype,"logout"),D.prototype),D);window.stores={authStore:I,userStore:S,fileStore:C,myUploadStore:L};var M=Object(r.createContext)({authStore:I,userStore:S,fileStore:C,myUploadStore:L}),N=function(){return Object(r.useContext)(M)}}},[[147,4,5]]]);
//# sourceMappingURL=main.9d4ed9d8.chunk.js.map